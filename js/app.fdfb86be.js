webpackJsonp([1],{0:function(t,e,o){t.exports=o("NHnr")},1:function(t,e){},2:function(t,e){},"8L5H":function(t,e){},NHnr:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("/5sW"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"miguel-rojas"},[n("header",{staticClass:"header"},[n("router-link",{staticClass:"header__logo-link",attrs:{to:"home"}},[n("img",{staticClass:"header__logo",attrs:{src:o("xY/g"),alt:"Miguel Rojas"}})])],1),t._v(" "),n("router-view")],1)},i=[],r=o("XyMi");function s(t){o("8L5H")}var u=null,c=!1,h=s,l=null,f=null,p=Object(r["a"])(u,a,i,c,h,l,f),d=p.exports,m=o("/ocq"),v=(o("y9m4"),o("uDYd"),o("WpTh"),o("Sazm")),g={created:function(){this.initializeFirebase()},methods:{initializeFirebase:function(){var t={apiKey:"AIzaSyAqmQLL566Ux6Nh4VZr_Ckm9dJye773mjQ",authDomain:"miguelrojas-photos.firebaseapp.com",databaseURL:"https://miguelrojas-photos.firebaseio.com",projectId:"miguelrojas-photos",storageBucket:"miguelrojas-photos.appspot.com",messagingSenderId:"826239206435"};v["apps"].length||v["initializeApp"](t),this.firebase=v}}},_=g,b=(o("SldL"),o("7hDC")),P=o.n(b),w=o("cNWa"),j=o.n(w),x={created:function(){this.initializeFlickr()},methods:{initializeFlickr:function(){this.flickr=new j.a("33407846e84c83efa35a8c47d36931d0")},getPhotoSource:function(){var t=P()(regeneratorRuntime.mark(function t(e){var o=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){o.flickr.photos.getSizes({photo_id:e}).then(function(e){var n=e.body.sizes.size.pop(),a=n.source;o.preloadImage(a).then(function(){t(a)})})}));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),preloadImage:function(){var t=P()(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){var o=new Image;o.addEventListener("load",function(){t()}),o.src=e}));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}},y=x,k={name:"featured-photos",mixins:[_,y],data:function(){return{photos:[]}},computed:{activePhoto:function(){return this.photos.find(function(t){return t.active&&t.source})},layout:function(){var t=null;return t=window.screen.width>window.screen.height?"landscape":"portrait",t}},created:function(){this.getPhotos()},methods:{getPhotos:function(){var t=this;this.firebase.database().ref("photos").orderByChild("featured").equalTo(!0).once("value").then(function(e){t.photos=e.val().filter(function(e){return e.layout===t.layout}).sort(function(){return Math.random()-.5}),t.iteratePhotos()})},activateNextPhoto:function(){var t=this;return new Promise(function(e){var o=null;o=t.activePhoto?t.photos.indexOf(t.activePhoto)+1:0,o>=t.photos.length&&(o=0);var n=t.photos[o];n.source?(t.deactivatePhoto(t.activePhoto),t.$set(n,"active",!0),e(n)):t.getPhotoSource(n.flickr_id).then(function(o){t.deactivatePhoto(t.activePhoto),t.$set(n,"source",o),t.$set(n,"active",!0),e(n)})})},deactivatePhoto:function(t){t&&this.$set(t,"active",!1)},iteratePhotos:function(){var t=this;this.activateNextPhoto().then(function(){setTimeout(function(){t.iteratePhotos()},5e3)})}}},C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"featured-photos"},[n("transition",{attrs:{name:"fade"}},[t.activePhoto?t._e():n("div",{staticClass:"featured-photos__loading"},[n("img",{attrs:{src:o("nuJt"),alt:"Loading..."}})])]),t._v(" "),t._l(t.photos,function(t){return n("div",{key:t.id,staticClass:"featured-photos__photo",class:{"featured-photos__photo--active":t.active},style:{backgroundImage:"url("+t.source+")"}})})],2)},z=[];function $(t){o("drUF")}var L=!1,F=$,I=null,S=null,E=Object(r["a"])(k,C,z,L,F,I,S),N=E.exports,O={name:"home",components:{FeaturedPhotos:N}},R=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"home"},[o("featured-photos")],1)},T=[],H=!1,J=null,M=null,U=null,q=Object(r["a"])(O,R,T,H,J,M,U),A=q.exports,D=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},W=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"about"},[o("h1",[t._v("This is an about page")])])}],Y=null,B=!1,Q=null,K=null,V=null,X=Object(r["a"])(Y,D,W,B,Q,K,V),Z=X.exports;n["a"].use(m["a"]);var G=new m["a"]({routes:[{path:"/",name:"home",component:A},{path:"/about",name:"about",component:Z}]});n["a"].config.productionTip=!1,new n["a"]({router:G,render:function(t){return t(d)}}).$mount(".js-miguel-rojas")},drUF:function(t,e){},nuJt:function(t,e,o){t.exports=o.p+"img/loading.91762b2a.svg"},"xY/g":function(t,e,o){t.exports=o.p+"img/miguelrojas.92b11868.png"}},[0]);
//# sourceMappingURL=app.fdfb86be.js.map