webpackJsonp([1],{0:function(t,e,o){t.exports=o("NHnr")},1:function(t,e){},2:function(t,e){},"8L5H":function(t,e){},NHnr:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o("/5sW"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"miguel-rojas"},[n("header",{staticClass:"header"},[n("router-link",{staticClass:"header__logo-link",attrs:{to:"home"}},[n("img",{staticClass:"header__logo",attrs:{src:o("xY/g"),alt:"Miguel Rojas"}})])],1),t._v(" "),n("router-view")],1)},r=[],a=o("XyMi");function s(t){o("8L5H")}var u=null,c=!1,l=s,h=null,d=null,f=Object(a["a"])(u,i,r,c,l,h,d),_=f.exports,p=o("/ocq"),m=(o("y9m4"),o("uDYd"),o("WpTh"),o("Sazm")),v={created:function(){this.initializeFirebase()},methods:{initializeFirebase:function(){var t={apiKey:Object({NODE_ENV:"production",BASE_URL:"/miguelrojas/"}).VUE_APP_FIREBASE_API_KEY,authDomain:Object({NODE_ENV:"production",BASE_URL:"/miguelrojas/"}).VUE_APP_FIREBASE_AUTH_DOMAIN,databaseURL:Object({NODE_ENV:"production",BASE_URL:"/miguelrojas/"}).VUE_APP_FIREBASE_DATABASE_URL,projectId:Object({NODE_ENV:"production",BASE_URL:"/miguelrojas/"}).VUE_APP_FIREBASE_PROJECT_ID,storageBucket:Object({NODE_ENV:"production",BASE_URL:"/miguelrojas/"}).VUE_APP_FIREBASE_STORAGE_BUCKET,messagingSenderId:Object({NODE_ENV:"production",BASE_URL:"/miguelrojas/"}).VUE_APP_FIREBASE_MESSAGING_SENDER_ID};m["apps"].length||m["initializeApp"](t),this.firebase=m}}},E=v,g=(o("SldL"),o("7hDC")),P=o.n(g),A=o("cNWa"),b=o.n(A),j={created:function(){this.initializeFlickr()},methods:{initializeFlickr:function(){this.flickr=new b.a(Object({NODE_ENV:"production",BASE_URL:"/miguelrojas/"}).VUE_APP_FLICKR_API_KEY)},getPhotoSource:function(){var t=P()(regeneratorRuntime.mark(function t(e){var o=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){o.flickr.photos.getSizes({photo_id:e}).then(function(e){var n=e.body.sizes.size.pop(),i=n.source;o.preloadImage(i).then(function(){t(i)})})}));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),preloadImage:function(){var t=P()(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){var o=new Image;o.addEventListener("load",function(){t()}),o.src=e}));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}},R=j,S={name:"featured-photos",mixins:[E,R],data:function(){return{photos:[]}},computed:{activePhoto:function(){return this.photos.find(function(t){return t.active&&t.source})},layout:function(){var t=null;return t=window.screen.width>window.screen.height?"landscape":"portrait",t}},created:function(){this.getPhotos()},methods:{getPhotos:function(){var t=this;this.firebase.database().ref("photos").orderByChild("featured").equalTo(!0).once("value").then(function(e){t.photos=e.val().filter(function(e){return e.layout===t.layout}).sort(function(){return Math.random()-.5}),t.iteratePhotos()})},activateNextPhoto:function(){var t=this;return new Promise(function(e){var o=null;o=t.activePhoto?t.photos.indexOf(t.activePhoto)+1:0,o>=t.photos.length&&(o=0);var n=t.photos[o];n.source?(t.deactivatePhoto(t.activePhoto),t.$set(n,"active",!0),e(n)):t.getPhotoSource(n.flickr_id).then(function(o){t.deactivatePhoto(t.activePhoto),t.$set(n,"source",o),t.$set(n,"active",!0),e(n)})})},deactivatePhoto:function(t){t&&this.$set(t,"active",!1)},iteratePhotos:function(){var t=this;this.activateNextPhoto().then(function(){setTimeout(function(){t.iteratePhotos()},5e3)})}}},O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"featured-photos"},[n("transition",{attrs:{name:"fade"}},[t.activePhoto?t._e():n("div",{staticClass:"featured-photos__loading"},[n("img",{attrs:{src:o("nuJt"),alt:"Loading..."}})])]),t._v(" "),t._l(t.photos,function(t){return n("div",{key:t.id,staticClass:"featured-photos__photo",class:{"featured-photos__photo--active":t.active},style:{backgroundImage:"url("+t.source+")"}})})],2)},N=[];function w(t){o("drUF")}var U=!1,I=w,B=null,x=null,D=Object(a["a"])(S,O,N,U,I,B,x),L=D.exports,C={name:"home",components:{FeaturedPhotos:L}},F=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"home"},[o("featured-photos")],1)},V=[],k=!1,y=null,T=null,$=null,z=Object(a["a"])(C,F,V,k,y,T,$),M=z.exports,H=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},K=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"about"},[o("h1",[t._v("This is an about page")])])}],Y=null,J=!1,G=null,W=null,q=null,X=Object(a["a"])(Y,H,K,J,G,W,q),Q=X.exports;n["a"].use(p["a"]);var Z=new p["a"]({routes:[{path:"/",name:"home",component:M},{path:"/about",name:"about",component:Q}]});n["a"].config.productionTip=!1,new n["a"]({router:Z,render:function(t){return t(_)}}).$mount(".js-miguel-rojas")},drUF:function(t,e){},nuJt:function(t,e,o){t.exports=o.p+"img/loading.91762b2a.svg"},"xY/g":function(t,e,o){t.exports=o.p+"img/miguelrojas.92b11868.png"}},[0]);
//# sourceMappingURL=app.fa5f3721.js.map