webpackJsonp([1],{0:function(t,e,n){t.exports=n("NHnr")},1:function(t,e){},2:function(t,e){},"8L5H":function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("/5sW"),i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"miguel-rojas"},[o("header",{staticClass:"header"},[o("router-link",{staticClass:"header__logo-link",attrs:{to:"home"}},[o("img",{staticClass:"header__logo",attrs:{src:n("xY/g"),alt:"Miguel Rojas"}})])],1),t._v(" "),o("router-view")],1)},r=[],a=n("XyMi");function s(t){n("8L5H")}var u=null,c=!1,l=s,h=null,d=null,f=Object(a["a"])(u,i,r,c,l,h,d),_=f.exports,p=n("/ocq"),v=(n("y9m4"),n("uDYd"),n("WpTh"),n("Sazm")),E={created:function(){this.initializeFirebase()},methods:{initializeFirebase:function(){var t={apiKey:Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_FIREBASE_API_KEY,authDomain:Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_FIREBASE_AUTH_DOMAIN,databaseURL:Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_FIREBASE_DATABASE_URL,projectId:Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_FIREBASE_PROJECT_ID,storageBucket:Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_FIREBASE_STORAGE_BUCKET,messagingSenderId:Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_FIREBASE_MESSAGING_SENDER_ID};v["apps"].length||v["initializeApp"](t),this.firebase=v}}},m=E,P=(n("SldL"),n("7hDC")),g=n.n(P),A=n("cNWa"),b=n.n(A),R={created:function(){this.initializeFlickr()},methods:{initializeFlickr:function(){this.flickr=new b.a(Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_FLICKR_API_KEY)},getPhotoSource:function(){var t=g()(regeneratorRuntime.mark(function t(e){var n=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){n.flickr.photos.getSizes({photo_id:e}).then(function(e){var o=e.body.sizes.size.pop(),i=o.source;n.preloadImage(i).then(function(){t(i)})})}));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),preloadImage:function(){var t=g()(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){var n=new Image;n.addEventListener("load",function(){t()}),n.src=e}));case 1:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}},S=R,O={name:"featured-photos",mixins:[m,S],data:function(){return{photos:[]}},computed:{activePhoto:function(){return this.photos.find(function(t){return t.active&&t.source})},layout:function(){var t=null;return t=window.screen.width>window.screen.height?"landscape":"portrait",t}},created:function(){this.getPhotos()},methods:{getPhotos:function(){var t=this;this.firebase.database().ref("photos").orderByChild("featured").equalTo(!0).once("value").then(function(e){t.photos=e.val().filter(function(e){return e.layout===t.layout}).sort(function(){return Math.random()-.5}),t.iteratePhotos()})},activateNextPhoto:function(){var t=this;return new Promise(function(e){var n=null;n=t.activePhoto?t.photos.indexOf(t.activePhoto)+1:0,n>=t.photos.length&&(n=0);var o=t.photos[n];o.source?(t.deactivatePhoto(t.activePhoto),t.$set(o,"active",!0),e(o)):t.getPhotoSource(o.flickr_id).then(function(n){t.deactivatePhoto(t.activePhoto),t.$set(o,"source",n),t.$set(o,"active",!0),e(o)})})},deactivatePhoto:function(t){t&&this.$set(t,"active",!1)},iteratePhotos:function(){var t=this;this.activateNextPhoto().then(function(){setTimeout(function(){t.iteratePhotos()},5e3)})}}},N=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"featured-photos"},[o("transition",{attrs:{name:"fade"}},[t.activePhoto?t._e():o("div",{staticClass:"featured-photos__loading"},[o("img",{attrs:{src:n("nuJt"),alt:"Loading..."}})])]),t._v(" "),t._l(t.photos,function(t){return o("div",{key:t.id,staticClass:"featured-photos__photo",class:{"featured-photos__photo--active":t.active},style:{backgroundImage:"url("+t.source+")"}})})],2)},w=[];function U(t){n("drUF")}var I=!1,j=U,B=null,x=null,D=Object(a["a"])(O,N,w,I,j,B,x),L=D.exports,C={name:"home",components:{FeaturedPhotos:L}},F=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("featured-photos")],1)},V=[],k=!1,y=null,T=null,$=null,z=Object(a["a"])(C,F,V,k,y,T,$),M=z.exports,H=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},K=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"about"},[n("h1",[t._v("This is an about page")])])}],Y=null,J=!1,G=null,W=null,q=null,X=Object(a["a"])(Y,H,K,J,G,W,q),Q=X.exports;o["a"].use(p["a"]);var Z=new p["a"]({routes:[{path:"/",name:"home",component:M},{path:"/about",name:"about",component:Q}]});o["a"].config.productionTip=!1,new o["a"]({router:Z,render:function(t){return t(_)}}).$mount(".js-miguel-rojas")},drUF:function(t,e){},nuJt:function(t,e,n){t.exports=n.p+"img/loading.91762b2a.svg"},"xY/g":function(t,e,n){t.exports=n.p+"img/miguelrojas.92b11868.png"}},[0]);
//# sourceMappingURL=app.e43e705a.js.map